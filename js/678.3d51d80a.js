"use strict";(self["webpackChunkparking_final"]=self["webpackChunkparking_final"]||[]).push([[678],{1259:function(t,e,a){a.d(e,{a:function(){return i}});var o=a(7327),s=a(4161);class i{constructor(){(0,o.Z)(this,"axiosClient",void 0),this.axiosClient=s.Z.create({baseURL:"http://localhost:8081",headers:{"Content-type":"application/json"}})}async findById(t){try{const e=await this.axiosClient.get(`/api/condutor/${t}`);return e.data}catch(e){return Promise.reject(e)}}async findByNome(t){try{const e=await s.Z.get(`http://localhost:8081/api/condutor/nome?nome=${t}`);return e.data}catch(e){return Promise.reject(e)}}async getByCPF(t){try{const e=await s.Z.get(`http://localhost:8081/api/condutor/cpf?cpf=${t}`);return e.data}catch(e){return Promise.reject(e)}}async findAll(){try{const t=await this.axiosClient.get("/api/condutor/all");return t.data}catch(t){return console.error(t),[]}}async save(t){try{const e=await this.axiosClient.post("/api/condutor",t);return e.data}catch(e){return Promise.reject(e)}}async update(t){try{const e=await this.axiosClient.put("http://localhost:8081/api/condutor",t);return e.data}catch(e){return Promise.reject(e)}}async delete(t){try{await this.axiosClient.delete(`/api/condutor?id=${t}`)}catch(e){return Promise.reject(e.response)}}async findByFiltrosPaginado(t){try{let e="";return e+=`page=${t.currentPage}`,e+=`&size=${t.pageSize}`,(await this.axiosClient.get(`/api/condutor?${e}`)).data}catch(e){return Promise.reject(e.response)}}}},6647:function(t,e,a){a.d(e,{Y:function(){return i}});var o=a(7327),s=a(4161);class i{constructor(){(0,o.Z)(this,"axiosClient",void 0),this.axiosClient=s.Z.create({baseURL:"http://localhost:8081",headers:{"Content-type":"application/json"}})}async findById(t){try{const e=await this.axiosClient.get(`/api/veiculo/${t}`);return e.data}catch(e){return Promise.reject(e)}}async findByPlaca(t){try{const e=await s.Z.get(`http://localhost:8081/api/veiculo/placa?placa=${t}`);return e.data}catch(e){return Promise.reject(e)}}async findAll(){try{const t=await this.axiosClient.get("/api/veiculo/all");return t.data}catch(t){return console.error(t),[]}}async save(t){try{const e=await this.axiosClient.post("/api/veiculo",t);return e.data}catch(e){return Promise.reject(e)}}async update(t){try{const e=await this.axiosClient.put("http://localhost:8081/api/veiculo",t);return e.data}catch(e){return Promise.reject(e)}}async delete(t){try{await this.axiosClient.delete(`/api/veiculo?id=${t}`)}catch(e){return Promise.reject(e.response)}}async findByFiltrosPaginado(t){try{let e="";return e+=`page=${t.currentPage}`,e+=`&size=${t.pageSize}`,(await this.axiosClient.get(`/api/veiculo?${e}`)).data}catch(e){return Promise.reject(e.response)}}}},8167:function(t,e,a){a.d(e,{F:function(){return s}});var o=a(7327);class s{constructor(){(0,o.Z)(this,"id",void 0),(0,o.Z)(this,"cadastro",void 0),(0,o.Z)(this,"atualizacao",void 0),(0,o.Z)(this,"ativo",void 0),this.ativo=!0}}},4715:function(t,e,a){a.d(e,{v:function(){return i}});var o=a(7327),s=a(8167);class i extends s.F{constructor(){super(),(0,o.Z)(this,"nome",void 0),(0,o.Z)(this,"cpf",void 0),(0,o.Z)(this,"telefone",void 0),(0,o.Z)(this,"tempoPagoHoras",void 0),(0,o.Z)(this,"tempoPagoMinutos",void 0),(0,o.Z)(this,"tempoDescontoHoras",void 0),this.ativo=!0}}},4164:function(t,e,a){a.d(e,{h:function(){return i}});var o=a(7327),s=a(8167);class i extends s.F{constructor(){super(),(0,o.Z)(this,"nome",void 0),this.ativo=!0}}},4753:function(t,e,a){a.d(e,{Z:function(){return l}});var o=a(7327),s=a(8167),i=a(4164);class l extends s.F{constructor(){super(),(0,o.Z)(this,"nome",void 0),(0,o.Z)(this,"marca",void 0),this.ativo=!0,this.marca=new i.h}}},9151:function(t,e,a){a.d(e,{T:function(){return n}});var o=a(7327),s=a(8167),i=a(4715),l=a(7744);class n extends s.F{constructor(){super(),(0,o.Z)(this,"veiculo",void 0),(0,o.Z)(this,"condutor",void 0),(0,o.Z)(this,"entrada",void 0),(0,o.Z)(this,"saida",void 0),(0,o.Z)(this,"tempoHoras",void 0),(0,o.Z)(this,"tempoMinutos",void 0),(0,o.Z)(this,"tempoDesconto",void 0),(0,o.Z)(this,"tempoMultaHoras",void 0),(0,o.Z)(this,"tempoMultaMinutos",void 0),(0,o.Z)(this,"valorDesconto",void 0),(0,o.Z)(this,"valorMulta",void 0),(0,o.Z)(this,"valorTotal",void 0),(0,o.Z)(this,"valorHora",void 0),(0,o.Z)(this,"valorHoraMulta",void 0),this.ativo=!0,this.veiculo=new l.C,this.condutor=new i.v}}},7744:function(t,e,a){a.d(e,{C:function(){return l}});var o=a(7327),s=a(8167),i=a(4753);class l extends s.F{constructor(){super(),(0,o.Z)(this,"placa",void 0),(0,o.Z)(this,"modelo",void 0),(0,o.Z)(this,"ano",void 0),(0,o.Z)(this,"cor",void 0),(0,o.Z)(this,"tipo",void 0),this.ativo=!0,this.modelo=new i.Z}}},2678:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var o=a(3396),s=a(9242),i=a(7139);const l=t=>((0,o.dD)("data-v-9961f808"),t=t(),(0,o.Cn)(),t),n={class:"access-content d-flex flex-column align-items-start justify-content-start"},r=l((()=>(0,o._)("p",{class:"title-pages"},"Register: Close Movement",-1))),c={class:"form-application d-flex flex-column custom-section"},d={class:"d-flex align-items-center align-self-start gap-3"},u={class:"d-flex flex-column"},v=l((()=>(0,o._)("label",{for:"exampleDataList",class:"form-label"},"Associated Condutor",-1))),p={class:"d-flex align-items-center align-self-start gap-3"},h={class:"d-flex flex-column"},m=l((()=>(0,o._)("label",{for:"exampleDataList",class:"form-label"},"Associated Vehicle",-1))),f={class:"d-flex align-items-center align-self-start gap-3"},y={class:"d-flex flex-column"},g=l((()=>(0,o._)("label",{for:"entry",class:"form-label"},"Entry Date",-1))),w={class:"d-flex flex-column"},x=l((()=>(0,o._)("label",{for:"exit",class:"form-label"},"Exit Date",-1))),_={class:"mt-3 d-flex align-items-center gap-3"},M=l((()=>(0,o._)("button",{type:"submit"},"Close Movement",-1))),b={class:"modal fade",id:"details",tabindex:"-1","aria-labelledby":"details","aria-hidden":"true"},Z={class:"modal-dialog"},C={class:"modal-content"},P=l((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Receipt"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),z={class:"modal-body d-flex justify-content-between align-items-center"},D=(0,o.uE)('<div class="modal-col d-flex flex-column" style="text-align:start;" data-v-9961f808><p data-v-9961f808>Active :</p><p data-v-9961f808>Registration Date :</p><hr data-v-9961f808><p data-v-9961f808>Driver Name :</p><p data-v-9961f808>Driver CPF :</p><p data-v-9961f808>Driver Phone :</p><p data-v-9961f808>Driver Total Payed Hours :</p><p data-v-9961f808>Driver Discount Hours :</p><hr data-v-9961f808><p data-v-9961f808>Vehicle License Plate :</p><p data-v-9961f808>Vehicle Brand Name :</p><p data-v-9961f808>Vehicle Modal Name :</p><p data-v-9961f808>Vehicle Type :</p><p data-v-9961f808>Vehicle Year :</p><p data-v-9961f808>Vehicle Color :</p><hr data-v-9961f808><p data-v-9961f808>Entry Date :</p><p data-v-9961f808>Exit Date :</p><p data-v-9961f808>Total Hours :</p><p data-v-9961f808>Total Penalty Hours :</p><p data-v-9961f808>Total Discount Hours :</p><p data-v-9961f808>Penalty Value :</p><p data-v-9961f808>Discount Value :</p><p data-v-9961f808>Total Value :</p></div>',1),A={class:"modal-col d-flex flex-column"},j=l((()=>(0,o._)("hr",null,null,-1))),$=l((()=>(0,o._)("hr",null,null,-1))),F=l((()=>(0,o._)("hr",null,null,-1))),H=l((()=>(0,o._)("div",{class:"modal-footer"},[(0,o._)("button",{type:"button",class:"btn btn-sm btn-secondary","data-bs-dismiss":"modal"},"Close")],-1)));function V(t,e,a,l,V,B){return(0,o.wg)(),(0,o.iD)("div",n,[r,(0,o._)("div",c,[(0,o._)("form",{class:"form-app d-flex flex-column align-items-start mt-4 h-100 gap-3",onSubmit:e[5]||(e[5]=(0,s.iM)(((...e)=>t.submitForm&&t.submitForm(...e)),["prevent"]))},[(0,o._)("div",d,[(0,o._)("div",u,[v,(0,o.wy)((0,o._)("input",{class:"form-control",readonly:"",list:"datalistOptions",id:"exampleDataList",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[0]||(e[0]=e=>t.condutorAs=e)},null,512),[[s.nr,t.condutorAs]])])]),(0,o._)("div",p,[(0,o._)("div",h,[m,(0,o.wy)((0,o._)("input",{class:"form-control",readonly:"",list:"datalistOptions",id:"exampleDataList",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[1]||(e[1]=e=>t.veiculoAs=e)},null,512),[[s.nr,t.veiculoAs]])])]),(0,o._)("div",f,[(0,o._)("div",y,[g,(0,o.wy)((0,o._)("input",{class:"form-control",readonly:"",type:"datetime-local",id:"entry",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[2]||(e[2]=e=>t.entryAs=e)},null,512),[[s.nr,t.entryAs]])]),(0,o._)("div",w,[x,(0,o.wy)((0,o._)("input",{class:"form-control",type:"datetime-local",id:"exit",style:{width:"300px"},"onUpdate:modelValue":e[3]||(e[3]=e=>t.move.saida=e)},null,512),[[s.nr,t.move.saida]])])]),(0,o._)("div",_,[M,(0,o._)("button",{onClick:e[4]||(e[4]=e=>t.showReceipt(t.move)),"data-bs-toggle":"modal","data-bs-target":"#details",type:"button"},"Show Receipt"),(0,o._)("p",{class:(0,i.C_)(["error-message","success"===t.errorMessage.status?"text-success":"text-danger"])},(0,i.zw)(t.errorMessage.message),3)])],32),(0,o._)("div",b,[(0,o._)("div",Z,[(0,o._)("div",C,[P,(0,o._)("div",z,[D,(0,o._)("div",A,[(0,o._)("p",null,(0,i.zw)(t.selectedMove?.ativo),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.cadastro),1),j,(0,o._)("p",null,(0,i.zw)(t.selectedMove?.condutor.nome),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.condutor.cpf),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.condutor.telefone),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.condutor.tempoPagoHoras),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.tempoDesconto),1),$,(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.placa),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.modelo.marca.nome),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.modelo.nome),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.tipo),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.ano),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.veiculo.cor),1),F,(0,o._)("p",null,(0,i.zw)(t.selectedMove?.entrada),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.saida),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.tempoHoras),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.tempoMultaHoras),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.tempoDesconto),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.valorMulta),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.valorDesconto),1),(0,o._)("p",null,(0,i.zw)(t.selectedMove?.valorTotal),1)])]),H])])])])])}var B=a(1259),I=a(5276),E=a(6647),T=a(9151),L=(0,o.aZ)({data(){return{condutorAs:"",veiculoAs:"",entryAs:new Date,move:new T.T,errorMessage:{status:"",message:""},selectedMove:null}},computed:{moveClient(){return new I.M}},mounted(){this.fetchOpenMovement()},methods:{async submitForm(){if(null!=this.move.saida)try{await this.fetchItems(),await this.moveClient.save(this.move),this.setErrorMessage("success","Movement closed successfully");this.move.id;await this.moveClient.delete(Number(this.$route.params.movemId))}catch(t){this.setErrorMessage("error","An error occurred during registration.",t)}else this.setErrorMessage("error","Exit date is required")},setErrorMessage(t,e,a){if(this.errorMessage.status=t,a&&a.response&&a.response.data){const t=Object.values(a.response.data);e=t.join("")}this.errorMessage.message=e},async fetchOpenMovement(){try{const t=await this.moveClient.findById(Number(this.$route.params.movemId));this.condutorAs=t.condutor.cpf,this.veiculoAs=t.veiculo.placa,this.entryAs=t.entrada}catch(t){console.log(t)}},async fetchItems(){try{const t=new E.Y,e=new B.a,a=await t.findByPlaca(this.veiculoAs),o=await e.getByCPF(this.condutorAs);a&&a.id&&(this.move.veiculo.id=a.id),o&&o.id&&(this.move.condutor.id=o.id),this.move.entrada=this.entryAs}catch(t){console.error("Failed to fetch veiculo ID:",t)}},async showReceipt(t){if(null==t.saida)try{this.fetchItems();const t=await this.moveClient.findById(Number(this.$route.params.movemId));this.selectedMove=t,console.log(this.selectedMove+"move.saida == null")}catch(e){console.log(e)}else try{this.fetchItems();const t=await this.moveClient.findByLast();this.selectedMove=t,console.log(this.selectedMove+"move.saida != null")}catch(e){console.log(e)}}}}),R=a(89);const k=(0,R.Z)(L,[["render",V],["__scopeId","data-v-9961f808"]]);var N=k}}]);
//# sourceMappingURL=678.3d51d80a.js.map