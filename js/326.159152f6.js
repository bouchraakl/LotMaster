"use strict";(self["webpackChunkparking_final"]=self["webpackChunkparking_final"]||[]).push([[326],{4452:function(e,t,a){a.d(t,{l:function(){return s}});var l=a(7327);class s{constructor(){(0,l.Z)(this,"currentPage",void 0),(0,l.Z)(this,"pageSize",void 0),(0,l.Z)(this,"direction",void 0),this.currentPage=0,this.direction="asc"}}},1326:function(e,t,a){a.r(t),a.d(t,{default:function(){return le}});var l=a(3396),s=a(9242),c=a(7139);const o=e=>((0,l.dD)("data-v-dce7aa7c"),e=e(),(0,l.Cn)(),e),n={class:"access-content d-flex flex-column align-items-start justify-content-start"},i={class:"header d-flex align-content-start justify-content-between m-0"},d=o((()=>(0,l._)("p",{class:"title-pages"},"Access : Closed Movements",-1))),r={class:"search-container"},u=o((()=>(0,l._)("i",{class:"bi bi-search search-icon"},null,-1))),p={class:"filter d-flex align-items-center my-4 gap-4 w-100"},v={class:"filter-container d-flex align-items-center gap-2"},h=o((()=>(0,l._)("label",{for:"year-filter"},"Year:",-1))),m=o((()=>(0,l._)("option",{value:""},"All",-1))),_=["value"],g={class:"filter-container d-flex align-items-center gap-2"},w=o((()=>(0,l._)("label",{for:"month-filter"},"Month:",-1))),f=o((()=>(0,l._)("option",{value:""},"All",-1))),b=["value"],y={class:"table table-sm table-bordered w-100"},M=o((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"},"Id"),(0,l._)("th",{scope:"col"},"Active"),(0,l._)("th",{scope:"col"},"Registration Date"),(0,l._)("th",{scope:"col"},"License Plate"),(0,l._)("th",{scope:"col"},"Conductor Name"),(0,l._)("th",{scope:"col"},"Entry Date"),(0,l._)("th",{scope:"col"},"Exit Date"),(0,l._)("th",{scope:"col"},"Actions")])],-1))),z={class:"d-flex justify-content-center gap-2"},D=["onClick"],C=o((()=>(0,l._)("i",{class:"bi bi-pencil-square"},null,-1))),x=[C],P=["onClick"],k=o((()=>(0,l._)("i",{class:"bi bi-trash"},null,-1))),Y=[k],V=["onClick"],H=o((()=>(0,l._)("i",{class:"bi bi-eye"},null,-1))),I=[H],S={class:"modal fade",id:"details",tabindex:"-1","aria-labelledby":"details","aria-hidden":"true"},L={class:"modal-dialog"},A={class:"modal-content"},F=o((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Movement Details"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),T={class:"modal-body d-flex justify-content-between align-items-center"},Q=(0,l.uE)('<div class="modal-col d-flex flex-column" style="text-align:start;" data-v-dce7aa7c><p data-v-dce7aa7c>Movement ID :</p><p data-v-dce7aa7c>Active :</p><p data-v-dce7aa7c>Registration Date :</p><hr data-v-dce7aa7c><p data-v-dce7aa7c>Driver Name :</p><p data-v-dce7aa7c>Driver CPF :</p><p data-v-dce7aa7c>Driver Phone :</p><p data-v-dce7aa7c>Driver Total Payed Hours :</p><p data-v-dce7aa7c>Driver Discount Hours :</p><hr data-v-dce7aa7c><p data-v-dce7aa7c>Vehicle License Plate :</p><p data-v-dce7aa7c>Vehicle Brand Name :</p><p data-v-dce7aa7c>Vehicle Modal Name :</p><p data-v-dce7aa7c>Vehicle Type :</p><p data-v-dce7aa7c>Vehicle Year :</p><p data-v-dce7aa7c>Vehicle Color :</p><hr data-v-dce7aa7c><p data-v-dce7aa7c>Entry Date :</p><p data-v-dce7aa7c>Exit Date :</p><p data-v-dce7aa7c>Total Hours :</p><p data-v-dce7aa7c>Total Penalty Hours :</p><p data-v-dce7aa7c>Total Discount Hours :</p><p data-v-dce7aa7c>Penalty Value :</p><p data-v-dce7aa7c>Discount Value :</p><p data-v-dce7aa7c>Total Value :</p></div>',1),B={class:"modal-col d-flex flex-column"},E=o((()=>(0,l._)("hr",null,null,-1))),N=o((()=>(0,l._)("hr",null,null,-1))),Z=o((()=>(0,l._)("hr",null,null,-1))),$=o((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-sm btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))),j={class:"pagination-container align-self-end"},q={class:"pagination"},K=o((()=>(0,l._)("span",{"aria-hidden":"true"},"«",-1))),U=[K],R=["disabled"],G=o((()=>(0,l._)("span",{"aria-hidden":"true"},"»",-1))),J=[G];function O(e,t,a,o,C,k){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",i,[d,(0,l._)("div",r,[(0,l.wy)((0,l._)("input",{type:"text",class:"search-input",placeholder:"Search By license plate or name...","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t)},null,512),[[s.nr,e.searchQuery]]),u])]),(0,l._)("div",p,[(0,l._)("div",v,[h,(0,l.wy)((0,l._)("select",{id:"year-filter","onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedYear=t),class:"form-select",style:{padding:"0.3rem 2rem 0.3rem 0.75rem"}},[m,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.selectableYears,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e},(0,c.zw)(e),9,_)))),256))],512),[[s.bM,e.selectedYear]])]),(0,l._)("div",g,[w,(0,l.wy)((0,l._)("select",{id:"month-filter","onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedMonth=t),class:"form-select"},[f,((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(12,(e=>(0,l._)("option",{value:e},(0,c.zw)(e),9,b))),64))],512),[[s.bM,e.selectedMonth]])])]),(0,l._)("table",y,[M,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.closeFilter,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,c.zw)(t.id),1),(0,l._)("td",null,(0,c.zw)(t.ativo),1),(0,l._)("td",null,(0,c.zw)(e.formatDate(t.cadastro)),1),(0,l._)("td",null,(0,c.zw)(t.veiculo.placa),1),(0,l._)("td",null,(0,c.zw)(t.condutor.nome),1),(0,l._)("td",null,(0,c.zw)(e.formatDate(t.entrada)),1),(0,l._)("td",null,(0,c.zw)(e.formatDate(t.saida)),1),(0,l._)("td",null,[(0,l._)("div",z,[(0,l._)("button",{class:"btn btn-sm btn-primary",onClick:a=>e.editItem(t),style:{width:"45px",height:"30px"}},x,8,D),(0,l._)("button",{class:"btn btn-sm btn-danger",onClick:a=>e.deleteItem(t),style:{width:"45px",height:"30px"}},Y,8,P),(0,l._)("button",{type:"button",class:"btn btn-sm btn-info","data-bs-toggle":"modal","data-bs-target":"#details",style:{width:"45px",height:"30px",color:"#fff","font-weight":"bold"},onClick:a=>e.viewItem(t)},I,8,V)])])])))),128))])]),(0,l._)("div",S,[(0,l._)("div",L,[(0,l._)("div",A,[F,(0,l._)("div",T,[Q,(0,l._)("div",B,[(0,l._)("p",null,(0,c.zw)(e.selectedMove?.id),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.ativo),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.cadastro),1),E,(0,l._)("p",null,(0,c.zw)(e.selectedMove?.condutor.nome),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.condutor.cpf),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.condutor.telefone),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.condutor.tempoPagoHoras),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.tempoDesconto),1),N,(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.placa),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.modelo.marca.nome),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.modelo.nome),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.tipo),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.ano),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.veiculo.cor),1),Z,(0,l._)("p",null,(0,c.zw)(e.selectedMove?.entrada),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.saida),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.tempoHoras),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.tempoMultaHoras),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.tempoDesconto),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.valorMulta),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.valorDesconto),1),(0,l._)("p",null,(0,c.zw)(e.selectedMove?.valorTotal),1)])]),$])])]),(0,l._)("div",j,[(0,l._)("ul",q,[(0,l._)("li",{class:(0,c.C_)(["page-item",{disabled:0===e.currentPage}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[3]||(t[3]=(...t)=>e.previousPage&&e.previousPage(...t)),style:{color:"#3C3C43","background-color":"#B5C2C9"}},U)],2),(0,l._)("li",{class:"page-item",disabled:e.closeFilter.length<e.pageSize},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[4]||(t[4]=(...t)=>e.nextPage&&e.nextPage(...t)),style:{color:"#3C3C43","background-color":"#B5C2C9"}},J)],8,R)])])])}a(7658);var W=a(5276),X=a(4452),ee=(0,l.aZ)({name:"AccessVehicleModelView",data(){return{moves:[],searchQuery:"",selectedYear:null,selectedMonth:null,selectedMove:null,currentPage:0,pageSize:8}},created(){this.$route.query.licensePlate&&(this.searchQuery=this.$route.query.licensePlate.toLocaleString())},computed:{closeFilter(){if(this.searchQuery||this.selectedYear||this.selectedMonth){const e=this.searchQuery.toLowerCase();return this.moves.filter((t=>{const a=new Date(t.saida),l=a.getFullYear(),s=a.getMonth()+1,c=t.veiculo.placa.toLowerCase().includes(e)||t.condutor.nome.toLowerCase().includes(e);return this.selectedYear&&this.selectedMonth?c&&l===this.selectedYear&&s===this.selectedMonth:this.selectedYear?c&&l===this.selectedYear:this.selectedMonth?c&&s===this.selectedMonth:c}))}return this.moves},selectableYears(){const e=(new Date).getFullYear(),t=[];for(let a=2019;a<=e;a++)t.push(a);return t}},mounted(){this.fetchMoves()},methods:{async fetchMoves(){try{const e=new X.l;e.currentPage=this.currentPage,e.pageSize=this.pageSize;const t=new W.M,a=await t.findByFiltrosPaginado(e);this.moves=a.content.filter((e=>null!==e.saida))}catch(e){console.error(e)}},previousPage(){this.currentPage>0&&(this.currentPage--,this.fetchMoves())},nextPage(){this.closeFilter.length===this.pageSize&&(this.currentPage++,this.fetchMoves())},formatDate(e){const t=new Date(e),a=t.toLocaleDateString(),l=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${a} ${l}`},async deleteItem(e){const t=confirm("Are you sure you want to delete this movement?");if(t)try{const t=new W.M;await t.delete(e.id),this.moves=this.moves.filter((t=>t.id!==e.id))}catch(a){console.error(a)}},async editItem(e){try{new W.M;const t=e.id;await this.$router.push({name:"edit-closemovement",params:{editCloseId:t}})}catch(t){console.error(t)}},async viewItem(e){this.selectedMove=e}}}),te=a(89);const ae=(0,te.Z)(ee,[["render",O],["__scopeId","data-v-dce7aa7c"]]);var le=ae}}]);
//# sourceMappingURL=326.159152f6.js.map