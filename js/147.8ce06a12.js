"use strict";(self["webpackChunkparking_final"]=self["webpackChunkparking_final"]||[]).push([[147],{1259:function(e,t,a){a.d(t,{a:function(){return s}});var r=a(7327),i=a(4161);class s{constructor(){(0,r.Z)(this,"axiosClient",void 0),this.axiosClient=i.Z.create({baseURL:"http://localhost:8081",headers:{"Content-type":"application/json"}})}async findById(e){try{const t=await this.axiosClient.get(`/api/condutor/${e}`);return t.data}catch(t){return Promise.reject(t)}}async findByNome(e){try{const t=await i.Z.get(`http://localhost:8081/api/condutor/nome?nome=${e}`);return t.data}catch(t){return Promise.reject(t)}}async getByCPF(e){try{const t=await i.Z.get(`http://localhost:8081/api/condutor/cpf?cpf=${e}`);return t.data}catch(t){return Promise.reject(t)}}async findAll(){try{const e=await this.axiosClient.get("/api/condutor/all");return e.data}catch(e){return console.error(e),[]}}async save(e){try{const t=await this.axiosClient.post("/api/condutor",e);return t.data}catch(t){return Promise.reject(t)}}async update(e){try{const t=await this.axiosClient.put("http://localhost:8081/api/condutor",e);return t.data}catch(t){return Promise.reject(t)}}async delete(e){try{await this.axiosClient.delete(`/api/condutor?id=${e}`)}catch(t){return Promise.reject(t.response)}}async findByFiltrosPaginado(e){try{let t="";return t+=`page=${e.currentPage}`,t+=`&size=${e.pageSize}`,(await this.axiosClient.get(`/api/condutor?${t}`)).data}catch(t){return Promise.reject(t.response)}}}},4452:function(e,t,a){a.d(t,{l:function(){return i}});var r=a(7327);class i{constructor(){(0,r.Z)(this,"currentPage",void 0),(0,r.Z)(this,"pageSize",void 0),(0,r.Z)(this,"direction",void 0),this.currentPage=0,this.direction="asc"}}},6147:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var r=a(3396),i=a(9242),s=a(7139);const n=e=>((0,r.dD)("data-v-fda7f44e"),e=e(),(0,r.Cn)(),e),l={class:"access-content d-flex flex-column align-items-start justify-content-start"},o={class:"header d-flex align-content-start justify-content-between m-0"},c=n((()=>(0,r._)("p",{class:"title-pages"},"Access : Drivers",-1))),d={class:"search-container"},u=n((()=>(0,r._)("i",{class:"bi bi-search search-icon"},null,-1))),h={class:"filter d-flex align-items-center my-4 gap-4 w-100"},p={class:"filter-container d-flex align-items-center gap-2"},g=n((()=>(0,r._)("label",{for:"year-filter"},"Year:",-1))),f=n((()=>(0,r._)("option",{value:""},"All",-1))),_=["value"],m={class:"filter-container d-flex align-items-center gap-2"},y=n((()=>(0,r._)("label",{for:"month-filter"},"Month:",-1))),w=n((()=>(0,r._)("option",{value:""},"All",-1))),v=["value"],b=n((()=>(0,r._)("i",{class:"bi bi-plus-square"},null,-1))),C={class:"table table-sm table-bordered w-100"},P=n((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Id"),(0,r._)("th",{scope:"col"},"Active"),(0,r._)("th",{scope:"col"},"Registration Date"),(0,r._)("th",{scope:"col"},"Name"),(0,r._)("th",{scope:"col"},"CPF"),(0,r._)("th",{scope:"col"},"Phone"),(0,r._)("th",{scope:"col"},"Hours Payed"),(0,r._)("th",{scope:"col"},"Discount Hours"),(0,r._)("th",{scope:"col"},"Actions")])],-1))),x={class:"d-flex justify-content-center gap-2"},D=["onClick"],k=n((()=>(0,r._)("i",{class:"bi bi-pencil-square"},null,-1))),z=[k],Y=["onClick"],M=n((()=>(0,r._)("i",{class:"bi bi-trash"},null,-1))),S=[M],j={class:"pagination-container align-self-end"},F={class:"pagination"},$=n((()=>(0,r._)("span",{"aria-hidden":"true"},"«",-1))),Z=[$],A=["disabled"],B=n((()=>(0,r._)("span",{"aria-hidden":"true"},"»",-1))),I=[B];function H(e,t,a,n,k,M){const $=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",o,[c,(0,r._)("div",d,[(0,r.wy)((0,r._)("input",{type:"text",class:"search-input",placeholder:"Search By CPF or name ...","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t)},null,512),[[i.nr,e.searchQuery]]),u])]),(0,r._)("div",h,[(0,r._)("div",p,[g,(0,r.wy)((0,r._)("select",{id:"year-filter","onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedYear=t),class:"form-select",style:{padding:"0.3rem 2rem 0.3rem 0.75rem"}},[f,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.selectableYears,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e},(0,s.zw)(e),9,_)))),256))],512),[[i.bM,e.selectedYear]])]),(0,r._)("div",m,[y,(0,r.wy)((0,r._)("select",{id:"month-filter","onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedMonth=t),class:"form-select"},[w,((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(12,(e=>(0,r._)("option",{value:e},(0,s.zw)(e),9,v))),64))],512),[[i.bM,e.selectedMonth]])]),(0,r.Wm)($,{to:"/register-conductor",class:"router"},{default:(0,r.w5)((()=>[b])),_:1})]),(0,r._)("table",C,[P,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.driverFilter,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",null,(0,s.zw)(t.id),1),(0,r._)("td",null,(0,s.zw)(t.ativo),1),(0,r._)("td",null,(0,s.zw)(e.formatDate(t.cadastro)),1),(0,r._)("td",null,(0,s.zw)(t.nome),1),(0,r._)("td",null,(0,s.zw)(t.cpf),1),(0,r._)("td",null,(0,s.zw)(t.telefone),1),(0,r._)("td",null,(0,s.zw)(t.tempoPagoHoras),1),(0,r._)("td",null,(0,s.zw)(t.tempoDescontoHoras),1),(0,r._)("td",null,[(0,r._)("div",x,[(0,r._)("button",{class:"btn btn-sm btn-primary",onClick:a=>e.editItem(t),style:{width:"45px",height:"30px"}},z,8,D),(0,r._)("button",{class:"btn btn-sm btn-danger",onClick:a=>e.deleteItem(t),style:{width:"45px",height:"30px"}},S,8,Y)])])])))),128))])]),(0,r._)("div",j,[(0,r._)("ul",F,[(0,r._)("li",{class:(0,s.C_)(["page-item",{disabled:0===e.currentPage}])},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[3]||(t[3]=(...t)=>e.previousPage&&e.previousPage(...t)),style:{color:"#3C3C43","background-color":"#B5C2C9"}},Z)],2),(0,r._)("li",{class:"page-item",disabled:e.driverFilter.length<e.pageSize},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[4]||(t[4]=(...t)=>e.nextPage&&e.nextPage(...t)),style:{color:"#3C3C43","background-color":"#B5C2C9"}},I)],8,A)])])])}a(7658);var L=a(1259),Q=a(4452),V=(0,r.aZ)({name:"AccessVehicleModelView",data(){return{drivers:[],searchQuery:"",selectedYear:null,selectedMonth:null,currentPage:0,pageSize:5}},computed:{driverFilter(){if(this.searchQuery||this.selectedYear||this.selectedMonth){const e=this.searchQuery.toLowerCase();return this.drivers.filter((t=>{const a=new Date(t.cadastro),r=a.getFullYear(),i=a.getMonth()+1,s=t.nome.toString().toLowerCase().includes(e)||t.cpf.toString().toLowerCase().includes(e);return this.selectedYear&&this.selectedMonth?s&&r===this.selectedYear&&i===this.selectedMonth:this.selectedYear?s&&r===this.selectedYear:this.selectedMonth?s&&i===this.selectedMonth:s}))}return this.drivers},selectableYears(){const e=(new Date).getFullYear(),t=[];for(let a=2019;a<=e;a++)t.push(a);return t}},mounted(){this.fetchDriver()},methods:{async fetchDriver(){try{const e=new Q.l;e.currentPage=this.currentPage,e.pageSize=this.pageSize;const t=new L.a,a=await t.findByFiltrosPaginado(e);this.drivers=a.content}catch(e){console.error(e)}},previousPage(){this.currentPage>0&&(this.currentPage--,this.fetchDriver())},nextPage(){this.driverFilter.length===this.pageSize&&(this.currentPage++,this.fetchDriver())},formatDate(e){const t=new Date(e),a=t.toLocaleDateString(),r=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${a} ${r}`},async deleteItem(e){const t=confirm("Are you sure you want to delete this driver?");if(t)try{const t=new L.a;await t.delete(e.id),this.drivers=this.drivers.filter((t=>t.id!==e.id))}catch(a){console.error(a)}},async editItem(e){new L.a;const t=e.id;await this.$router.push({name:"edit-conductor",params:{editConductorId:t}})}}}),U=a(89);const K=(0,U.Z)(V,[["render",H],["__scopeId","data-v-fda7f44e"]]);var N=K}}]);
//# sourceMappingURL=147.8ce06a12.js.map