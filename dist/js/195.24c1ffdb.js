"use strict";(self["webpackChunkparking_final"]=self["webpackChunkparking_final"]||[]).push([[195],{1259:function(t,e,s){s.d(e,{a:function(){return i}});var a=s(7327),o=s(4161);class i{constructor(){(0,a.Z)(this,"axiosClient",void 0),this.axiosClient=o.Z.create({baseURL:"http://localhost:8081",headers:{"Content-type":"application/json"}})}async findById(t){try{const e=await this.axiosClient.get(`/api/condutor/${t}`);return e.data}catch(e){return Promise.reject(e)}}async findByNome(t){try{const e=await o.Z.get(`http://localhost:8081/api/condutor/nome?nome=${t}`);return e.data}catch(e){return Promise.reject(e)}}async getByCPF(t){try{const e=await o.Z.get(`http://localhost:8081/api/condutor/cpf?cpf=${t}`);return e.data}catch(e){return Promise.reject(e)}}async findAll(){try{const t=await this.axiosClient.get("/api/condutor/all");return t.data}catch(t){return console.error(t),[]}}async save(t){try{const e=await this.axiosClient.post("/api/condutor",t);return e.data}catch(e){return Promise.reject(e)}}async update(t){try{const e=await this.axiosClient.put("http://localhost:8081/api/condutor",t);return e.data}catch(e){return Promise.reject(e)}}async delete(t){try{await this.axiosClient.delete(`/api/condutor?id=${t}`)}catch(e){return Promise.reject(e.response)}}async findByFiltrosPaginado(t){try{let e="";return e+=`page=${t.currentPage}`,e+=`&size=${t.pageSize}`,(await this.axiosClient.get(`/api/condutor?${e}`)).data}catch(e){return Promise.reject(e.response)}}}},6647:function(t,e,s){s.d(e,{Y:function(){return i}});var a=s(7327),o=s(4161);class i{constructor(){(0,a.Z)(this,"axiosClient",void 0),this.axiosClient=o.Z.create({baseURL:"http://localhost:8081",headers:{"Content-type":"application/json"}})}async findById(t){try{const e=await this.axiosClient.get(`/api/veiculo/${t}`);return e.data}catch(e){return Promise.reject(e)}}async findByPlaca(t){try{const e=await o.Z.get(`http://localhost:8081/api/veiculo/placa?placa=${t}`);return e.data}catch(e){return Promise.reject(e)}}async findAll(){try{const t=await this.axiosClient.get("/api/veiculo/all");return t.data}catch(t){return console.error(t),[]}}async save(t){try{const e=await this.axiosClient.post("/api/veiculo",t);return e.data}catch(e){return Promise.reject(e)}}async update(t){try{const e=await this.axiosClient.put("http://localhost:8081/api/veiculo",t);return e.data}catch(e){return Promise.reject(e)}}async delete(t){try{await this.axiosClient.delete(`/api/veiculo?id=${t}`)}catch(e){return Promise.reject(e.response)}}async findByFiltrosPaginado(t){try{let e="";return e+=`page=${t.currentPage}`,e+=`&size=${t.pageSize}`,(await this.axiosClient.get(`/api/veiculo?${e}`)).data}catch(e){return Promise.reject(e.response)}}}},8167:function(t,e,s){s.d(e,{F:function(){return o}});var a=s(7327);class o{constructor(){(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"cadastro",void 0),(0,a.Z)(this,"atualizacao",void 0),(0,a.Z)(this,"ativo",void 0),this.ativo=!0}}},4715:function(t,e,s){s.d(e,{v:function(){return i}});var a=s(7327),o=s(8167);class i extends o.F{constructor(){super(),(0,a.Z)(this,"nome",void 0),(0,a.Z)(this,"cpf",void 0),(0,a.Z)(this,"telefone",void 0),(0,a.Z)(this,"tempoPagoHoras",void 0),(0,a.Z)(this,"tempoPagoMinutos",void 0),(0,a.Z)(this,"tempoDescontoHoras",void 0),this.ativo=!0}}},4164:function(t,e,s){s.d(e,{h:function(){return i}});var a=s(7327),o=s(8167);class i extends o.F{constructor(){super(),(0,a.Z)(this,"nome",void 0),this.ativo=!0}}},4753:function(t,e,s){s.d(e,{Z:function(){return r}});var a=s(7327),o=s(8167),i=s(4164);class r extends o.F{constructor(){super(),(0,a.Z)(this,"nome",void 0),(0,a.Z)(this,"marca",void 0),this.ativo=!0,this.marca=new i.h}}},9151:function(t,e,s){s.d(e,{T:function(){return n}});var a=s(7327),o=s(8167),i=s(4715),r=s(7744);class n extends o.F{constructor(){super(),(0,a.Z)(this,"veiculo",void 0),(0,a.Z)(this,"condutor",void 0),(0,a.Z)(this,"entrada",void 0),(0,a.Z)(this,"saida",void 0),(0,a.Z)(this,"tempoHoras",void 0),(0,a.Z)(this,"tempoMinutos",void 0),(0,a.Z)(this,"tempoDesconto",void 0),(0,a.Z)(this,"tempoMultaHoras",void 0),(0,a.Z)(this,"tempoMultaMinutos",void 0),(0,a.Z)(this,"valorDesconto",void 0),(0,a.Z)(this,"valorMulta",void 0),(0,a.Z)(this,"valorTotal",void 0),(0,a.Z)(this,"valorHora",void 0),(0,a.Z)(this,"valorHoraMulta",void 0),this.ativo=!0,this.veiculo=new r.C,this.condutor=new i.v}}},7744:function(t,e,s){s.d(e,{C:function(){return r}});var a=s(7327),o=s(8167),i=s(4753);class r extends o.F{constructor(){super(),(0,a.Z)(this,"placa",void 0),(0,a.Z)(this,"modelo",void 0),(0,a.Z)(this,"ano",void 0),(0,a.Z)(this,"cor",void 0),(0,a.Z)(this,"tipo",void 0),this.ativo=!0,this.modelo=new i.Z}}},3195:function(t,e,s){s.r(e),s.d(e,{default:function(){return F}});var a=s(3396),o=s(9242),i=s(7139);const r=t=>((0,a.dD)("data-v-76fe4ca8"),t=t(),(0,a.Cn)(),t),n={class:"access-content d-flex flex-column align-items-start justify-content-start"},c=r((()=>(0,a._)("p",{class:"title-pages"},"Edit : Close Movement",-1))),l={class:"form-application d-flex flex-column custom-section"},d={class:"d-flex align-items-center align-self-start gap-3"},u={class:"d-flex flex-column"},h=r((()=>(0,a._)("label",{for:"exampleDataList",class:"form-label"},"Associated Condutor",-1))),v={class:"d-flex align-items-center align-self-start gap-3"},m={class:"d-flex flex-column"},p=r((()=>(0,a._)("label",{for:"exampleDataList",class:"form-label"},"Associated Vehicle",-1))),f={class:"d-flex align-items-center align-self-start gap-3"},y={class:"d-flex flex-column"},g=r((()=>(0,a._)("label",{for:"entry",class:"form-label"},"Entry Date",-1))),x={class:"d-flex flex-column"},w=r((()=>(0,a._)("label",{for:"exit",class:"form-label"},"Exit Date",-1))),Z={class:"mt-3 d-flex align-items-center gap-3"},C=r((()=>(0,a._)("button",{type:"submit"},"Update Movement",-1)));function A(t,e,s,r,A,M){return(0,a.wg)(),(0,a.iD)("div",n,[c,(0,a._)("div",l,[(0,a._)("form",{class:"form-app d-flex flex-column align-items-start mt-4 h-100 gap-3",onSubmit:e[5]||(e[5]=(0,o.iM)(((...e)=>t.submitForm&&t.submitForm(...e)),["prevent"]))},[(0,a._)("div",d,[(0,a._)("div",u,[h,(0,a.wy)((0,a._)("input",{class:"form-control",readonly:"",list:"datalistOptions",id:"exampleDataList",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[0]||(e[0]=e=>t.condutorAs=e)},null,512),[[o.nr,t.condutorAs]])])]),(0,a._)("div",v,[(0,a._)("div",m,[p,(0,a.wy)((0,a._)("input",{class:"form-control",readonly:"",list:"datalistOptions",id:"exampleDataList",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[1]||(e[1]=e=>t.veiculoAs=e)},null,512),[[o.nr,t.veiculoAs]])])]),(0,a._)("div",f,[(0,a._)("div",y,[g,(0,a.wy)((0,a._)("input",{class:"form-control",readonly:"",type:"datetime-local",id:"entry",style:{width:"300px",color:"#909394"},"onUpdate:modelValue":e[2]||(e[2]=e=>t.entryAs=e)},null,512),[[o.nr,t.entryAs]])]),(0,a._)("div",x,[w,(0,a.wy)((0,a._)("input",{class:"form-control",type:"datetime-local",id:"exit",style:{width:"300px"},"onUpdate:modelValue":e[3]||(e[3]=e=>t.moveSaida=e)},null,512),[[o.nr,t.moveSaida]])])]),(0,a._)("div",Z,[C,(0,a._)("button",{type:"button",onClick:e[4]||(e[4]=(...e)=>t.cancelEdit&&t.cancelEdit(...e))},"Cancel"),(0,a._)("p",{class:(0,i.C_)(["error-message","success"===t.errorMessage.status?"text-success":"text-danger"])},(0,i.zw)(t.errorMessage.message),3)])],32)])])}s(7658);var M=s(1259),b=s(5276),_=s(6647),P=s(9151),j=(0,a.aZ)({data(){return{condutorAs:"",veiculoAs:"",entryAs:new Date,moveSaida:new Date,move:new P.T,errorMessage:{status:"",message:""}}},computed:{moveClient(){return new b.M}},async mounted(){this.fetchOpenMovement(),await this.fetchEdit()},methods:{async submitForm(){if(!this.condutorAs)return this.errorMessage.status="error",void(this.errorMessage.message="CPF cannot be null.");if(!this.veiculoAs)return this.errorMessage.status="error",void(this.errorMessage.message="Placa cannot be null.");if(!this.entryAs)return this.errorMessage.status="error",void(this.errorMessage.message="Entry Date cannot be null.");if(!this.moveSaida)return this.errorMessage.status="error",void(this.errorMessage.message="Exit Date cannot be null.");console.log(this.condutorAs),console.log(this.veiculoAs),console.log(this.entryAs),this.move.condutor.cpf=this.condutorAs,this.move.veiculo.placa=this.veiculoAs,this.move.entrada=this.entryAs,this.move.saida=this.moveSaida;try{await this.fetchItems(),await this.moveClient.update(this.move),this.errorMessage.status="success",this.errorMessage.message="Movement edited successfully"}catch(t){if(this.errorMessage.status="error",t.response&&t.response.data){console.error(t.response.data);const e=Object.values(t.response.data);this.errorMessage.message=e.join(", ")}else this.errorMessage.message="An error occurred during updating."}},async fetchOpenMovement(){try{const t=await this.moveClient.findById(Number(this.$route.params.movemId));this.condutorAs=t.condutor.cpf,this.veiculoAs=t.veiculo.placa,this.entryAs=t.entrada,console.log(this.entryAs)}catch(t){console.log(t)}},async fetchItems(){try{const t=new _.Y,e=new M.a,s=await t.findByPlaca(this.veiculoAs),a=await e.getByCPF(this.condutorAs);s&&s.id&&(this.move.veiculo.id=s.id),a&&a.id&&(this.move.condutor.id=a.id),this.move.entrada=new Date(this.entryAs)}catch(t){console.error("Failed to fetch veiculo ID:",t)}},async fetchEdit(){const t=Number(this.$route.params.editCloseId);if(isNaN(t))console.log("Invalid editMovemId parameter");else try{const e=await this.moveClient.findById(t);this.condutorAs=e.condutor.cpf,this.veiculoAs=e.veiculo.placa,this.entryAs=e.entrada,this.moveSaida=e.saida,this.move=e,console.log(e)}catch(e){console.log(e)}},cancelEdit(){this.$router.push("/access-closemovement")}}}),D=s(89);const $=(0,D.Z)(j,[["render",A],["__scopeId","data-v-76fe4ca8"]]);var F=$}}]);
//# sourceMappingURL=195.24c1ffdb.js.map